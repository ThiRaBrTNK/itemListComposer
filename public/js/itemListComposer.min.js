!function(e){e.fn.itemListComposer=function(t){var s=e.extend({itemsSource:".source",itemReceivers:".receiver",item:"li",selectitem:".select",selectAllitems:".select-all",deselectitem:".deselect",deselectAllitems:".deselect-all",shiftUpButton:".order-up",shiftDownButton:".order-down",acceptorTemplate:"#acceptor",acceptorClass:"acceptor",selectedClass:"selected"},t);return this.each(function(){function t(t,i,n){if("boolean"==typeof n&&n){var c=i.clone(!0);c.append(c.append(t).find(s.item).sort(function(t,s){return e(t).text().toUpperCase().localeCompare(e(s).text().toUpperCase())})),i.replaceWith(c)}else i.append(t);o=e(v).find(s.itemsSource),r=e(v).find(s.itemReceivers)}function i(t){var i=e(t).prev();i.hasClass(s.selectedClass)||i.before(t)}function n(t){var i=e(t).next();i.hasClass(s.selectedClass)||i.after(t)}function c(){r.find("."+s.acceptorClass).remove()}function a(){return C.clone()}var l,o=e(this).find(s.itemsSource),r=e(this).find(s.itemReceivers),d=e(this).find(s.selectitem),f=e(this).find(s.selectAllitems),h=e(this).find(s.deselectitem),u=e(this).find(s.deselectAllitems),p=e(this).find(s.shiftUpButton),m=e(this).find(s.shiftDownButton),C=e(e(this).find(s.acceptorTemplate).get(0).content),v=this,g=!1;o.append(o.find(s.item).sort(function(t,s){return e(t).text().toUpperCase().localeCompare(e(s).text().toUpperCase())})),o.add(r).find(s.item).click(function(t){if(t.shiftKey&&void 0!=l){var i=Math.min(e(this).index(),l.index()),n=Math.max(e(this).index(),l.index()),c=e(this).siblings().slice(i,n);c.add(this).addClass(s.selectedClass)}else e(this).toggleClass(s.selectedClass);l=e(this)}).on("dragstart",function(){}).on("dragend",function(){c()}),r.on("dragover",function(){}).on("dragleave",function(){g||c(),g=!1}).on("dragenter",function(t){if(g=!0,t.target===this){var i=e(this).find(s.item).last();i.hasClass(s.acceptorClass)||i.after(a())}}),r.find(s.item).on("dragover",function(){var t=event.pageY-e(this).offset().top;t<=e(this).outerHeight()/2&&!e(this).prev().hasClass(s.acceptorClass)?(c(),e(this).before(a())):t>e(this).outerHeight()/2&&!e(this).next().hasClass(s.acceptorClass)&&(c(),e(this).after(a()))}),d.click(function(){var e=o.find(s.item+"."+s.selectedClass);t(e,r)}),f.click(function(){var e=o.find(s.item);e.addClass(s.selectedClass),t(e,r)}),h.click(function(){var e=r.find(s.item+"."+s.selectedClass);t(e,o,!0)}),u.click(function(){var e=r.find(s.item);e.addClass(s.selectedClass),t(e,o,!0)}),p.click(function(){r.find(s.item+"."+s.selectedClass).each(function(){i(e(this))})}),m.click(function(){e(r.find(s.item+"."+s.selectedClass).get().reverse()).each(function(){n(e(this))})})})}}(jQuery);
